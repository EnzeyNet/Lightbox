!function(a){"use strict";var b=a.module("net.enzey.lightbox",["net.enzey.services"]);b.directive("nzLightbox",["$compile","$document",function(b,c){return{priority:1e3,terminal:!0,replace:!0,template:function(b,c){var d=a.element("<div data-nz-lightbox-logic></div>"),e=a.element('<div class="screenMask"></div>');a.isDefined(c.noMask)||d.append(e);{var f=a.element('<form class="lightbox"></form>');a.element('<form name="lightboxForm"></form>')}return f.attr("nz-transcluded-include",c[this.name]),f.append(b.children()),d.append(f),d[0].outerHTML},compile:function(d){return d.addClass("lightboxContainer"),{pre:function(d,e,f){var g;d.$on(f.showEvent,function(){g&&0!==g.parent().length||(g=e.clone(),a.element(c[0].body).append(g),b(g,null,1e3)(d))}),e.remove()},post:function(){}}}}}]),b.directive("nzLightboxLogic",["nzEventHelper",function(b){return{scope:!0,require:"nzLightboxLogic",controller:["$scope","$element",function(a,b){a.$on("lightboxAccept",function(){console.log("squelching: lightboxAccept")}),a.$on("lightboxReject",function(){console.log("squelching: lightboxReject")});var c;return c={acceptForm:function(){a.$emit("lightboxAccept",a),b.remove()},rejectForm:function(){a.$emit("lightboxReject"),b.remove()}}}],link:function(c,d,e,f){if(!a.isDefined(e.modal)){var g=d[0].querySelector(".lightbox");g=a.element(g),b.registerClickAwayAction(function(){f.rejectForm(),d.remove()},g)}}}}]),b.directive("lightboxAcceptAction",["$compile",function(a){return{priority:500,terminal:!0,require:"^nzLightboxLogic",compile:function(b){return b.attr("data-ng-disabled","lightboxForm.$invalid"),function(b,c,d,e){c.on("click",function(){e.acceptForm()}),a(c,null,500)(b)}}}}]),b.directive("lightboxRejectAction",["$compile",function(a){return{priority:500,terminal:!0,require:"^nzLightboxLogic",compile:function(){return function(b,c,d,e){c.on("click",function(){e.rejectForm()}),a(c,null,500)(b)}}}}])}(angular);